<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Lab-5 Dummy Variables</title>

<script src="lab-05-instructions_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="lab-05-instructions_files/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="lab-05-instructions_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="lab-05-instructions_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="lab-05-instructions_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="lab-05-instructions_files/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="textbook.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Lab-5 Dummy Variables</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#case-study">Case Study</a><ul>
<li><a href="#notes-on-interpretation">Notes on Interpretation</a></li>
<li><a href="#model-1">Model 1</a></li>
</ul></li>
<li><a href="#lab-questions">Lab Questions</a><ul>
<li><a href="#question-1">Question 1</a></li>
<li><a href="#question-2">Question 2</a></li>
<li><a href="#question-3">Question 3</a></li>
<li><a href="#question-4">Question 4</a></li>
<li><a href="#question-5">Question 5</a></li>
<li><a href="#question-6">Question 6</a></li>
<li><a href="#challenge-questions">Challenge Questions</a></li>
</ul></li>
<li><a href="#submission-instructions">Submission Instructions</a></li>
</ul>
</div>

<div id="cpp-523-program-eval-i" class="section level4">
<h4><a href="https://ds4ps.org/cpp-523-fall-2019/schedule/">CPP 523: Program Eval I</a></h4>
<p><br></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>( stargazer )</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>( pander )</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>( dplyr )</a></code></pre></div>
</div>
<div id="case-study" class="section level1">
<h1>Case Study</h1>
<p>This questions examines hypothetical data used to study the pay gap at Google. First read the news excerpts below:</p>
<p><a href="https://www.theguardian.com/technology/2018/oct/26/google-gender-pay-gap-women-class-action-lawsuit"><strong>Google gender pay gap: women advance suit that could affect 8,300 workers</strong></a></p>
<p>The Guardian, October 2018</p>
<p><em>A group of women who sued Google for pay discrimination are advancing a class-action lawsuit in California that could affect more than 8,000 current and former employees, the plaintiffs’ lawyer said.</em></p>
<p><em>The civil complaint, filed a year ago, alleged that Google was paying women less than men doing similar work while also denying promotions and career opportunities to qualified women who were “segregated” into lower-paying jobs. The first version of the suit covered all women employed by the company in California over four years, but the company fought the suit and data requests of the plaintiffs, and a judge dismissed the initial case as overly broad.</em></p>
<p><em>The class action followed a major inquiry by the US Department of Labor (DoL), which said last year that its audit of Google revealed “systemic compensation disparities against women pretty much across the entire workforce”. The allegation came after Google, a federal contractor subject to equal opportunity laws, refused to hand over certain records to the DoL. A judge ultimately ordered Google to disclose certain salary documents to labor investigators.</em></p>
<p><em>In its 2017 analysis, the company found statistically significant pay difference for 228 employees in six job categories, including men and women in several counties, and “Black and Latinx/Hispanic Googlers in the U.S. across functions.”</em></p>
<p><a href="https://techcrunch.com/2019/03/04/google-found-it-paid-men-less-than-women-for-the-same-job/"><strong>Google found it paid men less than women for the same job</strong></a></p>
<p>Tech Crunch, March 2019</p>
<p><em>The story we’re used to hearing is that women get paid less than men. In Google’s case, according to its own internal pay audit, it turned out male-identified Level 4 Software Engineers received less money than women in that same role. That led to Google paying $9.7 million to adjust pay for 10,677 employees.</em></p>
<p><em>It’s not clear how many of the employees who received pay adjustments were men (TechCrunch reached out to Google about this, but the company declined to share any additional data), but Google does cite the underpaying of men as a reason why the company paid more in adjustments for 2018 than in 2017. But The New York Times reports men received a disproportionately higher percentage of the money.</em></p>
<hr />
<p>The pay gap is a super interesting and timely program evaluation exercise, but not at all straight-forward. Men and women will often work in different roles in companies (a hospital where most doctors are women, most nurses are men, for example). Thus the comparison of male salaries to female salaries is pretty meaningless.</p>
<p>As a result, the analysis is typically done by creating buckets for the same positions and comparing salaries within those roles. The comparison of salaries of male and female nurses is much more meaningful. At Google, let’s assume that this data all comes from Level 1 engineers (entry level software positions where most people have bachelors degrees).</p>
<p>As a side note, this is not a perfect fix for estimating the level of discrimination since pay scale within a role does not account for discrimination in promotion across roles:</p>
<p><em>Kelly Ellis, a former Google software engineer and plaintiff in the lawsuit, claims she was hired in at Level 3, the category for recent college grads, despite having four years of professional experience. The lawsuit alleges that weeks after Ellis joined the company, Google hired a male engineer with the same experience at Level 4, which translated into a higher salary and potential access to bigger bonuses and more stock.</em> <a href="https://www.wired.com/story/men-google-paid-less-than-women-not-really/">cite</a></p>
<p>But for now, we will ignore those issues!</p>
<p>The data below represents (hypothetical) analysis of salaries for Level 1 Engineers that all started in the same year. We are using two categorical variables, sex and minority status, to determine if pay gaps exist.</p>
<p>I have created two identical models by inverting the dummies (female -&gt; male and minority -&gt; white). Use the models to answer the questions about salary descrimination below.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">m1 &lt;-<span class="st"> </span><span class="kw">lm</span>( salary <span class="op">~</span><span class="st"> </span>female <span class="op">+</span><span class="st"> </span>minority <span class="op">+</span><span class="st"> </span>female<span class="op">*</span>minority )</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">m2 &lt;-<span class="st"> </span><span class="kw">lm</span>( salary <span class="op">~</span><span class="st"> </span>male <span class="op">+</span><span class="st"> </span>white <span class="op">+</span><span class="st"> </span>male<span class="op">*</span>white )</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">           </a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">stargazer</span>( m1, m2, <span class="dt">type=</span><span class="st">&quot;html&quot;</span>, <span class="dt">digits=</span><span class="dv">0</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">           <span class="dt">intercept.bottom =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">           <span class="dt">omit.stat =</span> <span class="kw">c</span>(<span class="st">&quot;ser&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;rsq&quot;</span>,<span class="st">&quot;adj.rsq&quot;</span>),</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">           <span class="dt">covariate.labels =</span> <span class="kw">c</span>(<span class="st">&quot;a0/b0: Constant&quot;</span>, </a>
<a class="sourceLine" id="cb2-9" data-line-number="9">                                <span class="st">&quot;a1: female&quot;</span>, </a>
<a class="sourceLine" id="cb2-10" data-line-number="10">                                <span class="st">&quot;a2: minority&quot;</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">                                <span class="st">&quot;a3: female x minority&quot;</span>,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">                                <span class="st">&quot;b1: male&quot;</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">                                <span class="st">&quot;b2: white&quot;</span>,</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">                                <span class="st">&quot;b3: male x white&quot;</span>) )</a></code></pre></div>
<table style="text-align:center">
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
salary
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
a0/b0: Constant
</td>
<td>
89,788<sup>***</sup>
</td>
<td>
100,719<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(609)
</td>
<td>
(606)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
a1: female
</td>
<td>
3,739<sup>***</sup>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(866)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
a2: minority
</td>
<td>
748
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(898)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
a3: female x minority
</td>
<td>
6,444<sup>***</sup>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1,245)
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
b1: male
</td>
<td>
</td>
<td>
-10,183<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(895)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
b2: white
</td>
<td>
</td>
<td>
-7,192<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(863)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
b3: male x white
</td>
<td>
</td>
<td>
6,444<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
(1,245)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
1,000
</td>
<td>
1,000
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="2" style="text-align:right">
<sup><em></sup>p&lt;0.1; <sup><strong></sup>p&lt;0.05; <sup></strong></em></sup>p&lt;0.01
</td>
</tr>
</table>
<div id="notes-on-interpretation" class="section level3">
<h3>Notes on Interpretation</h3>
<p>Just like other regressions, these models represent <strong>conditional means</strong>, or averages conditioned on the level of treatment received. In the caffeine example, we could plug 200mg of caffeine into the equation to estimate the average heart rate for people receiving that level of the drug.</p>
<p>In this case we don’t have levels of treatment, we have distinct groups. But the math works out the same. If I want to calculate the value for a specific group I would need to turn dummy variables on and off until I have a configuration that represents the group. For example:</p>
</div>
<div id="model-1" class="section level3">
<h3>Model 1</h3>
<table>
<thead>
<tr class="header">
<th>Intercept</th>
<th>Female Dummy</th>
<th>Minority Dummy</th>
<th>Group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>0</td>
<td>white males</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>0</td>
<td>white females</td>
</tr>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>1</td>
<td>minority males</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>1</td>
<td>minority females</td>
</tr>
</tbody>
</table>
<p>We then plug in these dummy values to the regression equation.</p>
<p>The average salary for minority males is:</p>
<p><br></p>
<hr />
<p><br></p>
<p><span class="math inline">\(\hat{y} = a_0 + a_1 \cdot female + a_2 \cdot minority + a_3 \cdot female \cdot minority\)</span></p>
<p><span class="math inline">\(\hat{y} = 89,788 + (3,739)(0) + (748)(1) + (6,444)(0)(1) = 90,536\)</span></p>
<p><br></p>
<hr />
<p><br></p>
<p>The constant always represents the reference group that is constructed from all of the omitted catgories. All other salaries will include that salary as a starting point.</p>
<p>Also note since all salaries are in reference to the omitted group, the reference group determines the hypotheses that are tested in the model. Model 1 allows us to say something about whether salaries for minority males are different than white males since white males is the reference group. The coefficient <strong>a2</strong> in this case represents that hypothesis test.</p>
<p>We CANNOT, however, say anything about whether minority male salaries are (statistically) different than minority female salaries. Neither of those groups is the reference group, so none of the coefficients are reporting a test of those differences. WE can of course calculate the average salaries for those two groups, and calculate the difference. <em>We can’t, however, say whether that difference is statistically significant.</em></p>
<p>This model only allows us to test three contrasts where A represents the omitted group:</p>
<p><img src="figures/dummy-hypotheses.png" /></p>
<p>To test for differences between minority male and minority female salaries one of those groups must be constructed as the reference group.</p>
<p>Recall that the hypothesis test for salary differences are constructed as follows:</p>
<p><span class="math inline">\(NULL: wages_{white women} = wages_{white men}\)</span></p>
<p><span class="math inline">\((a_0 + a_1) = a_0\)</span></p>
<p><span class="math inline">\((a_0 + a_1) - a_0 = 0\)</span></p>
<p><span class="math inline">\(a_1 + a_0 - a_0 = 0\)</span></p>
<p><span class="math inline">\(a_1 = 0\)</span></p>
<p>So the statistical significance of a1 is the test for salary differences (the null being a1 is zero, i.e. that salary differences are zero).</p>
<p>Note that you can check your answers below by calculating the group salaries in two ways, one using coefficients from Model 1 and one using coefficients from Model 2. If you are doing the calculations correctly the answers should be identical.</p>
<p><br></p>
</div>
</div>
<div id="lab-questions" class="section level1">
<h1>Lab Questions</h1>
<div id="question-1" class="section level3">
<h3>Question 1</h3>
<p><strong>What group does the intercept represent in Model 1? What group does the intercept represent in Model 2?</strong></p>
</div>
<div id="question-2" class="section level3">
<h3>Question 2</h3>
<p><strong>What is the average salary of a white male?</strong></p>
</div>
<div id="question-3" class="section level3">
<h3>Question 3</h3>
<p><strong>What is the average salary of a white female?</strong></p>
</div>
<div id="question-4" class="section level3">
<h3>Question 4</h3>
<p><strong>What is the average salary of a minority female?</strong></p>
</div>
<div id="question-5" class="section level3">
<h3>Question 5</h3>
<p><strong>The coefficient a1 is statistically significant. Which hypothesis test does that coefficient represent?</strong></p>
</div>
<div id="question-6" class="section level3">
<h3>Question 6</h3>
<p><strong>The coefficient a2 is NOT statistically significant. Which hypothesis test does that coefficient represent?</strong></p>
</div>
<div id="challenge-questions" class="section level3">
<h3>Challenge Questions</h3>
<p>You do not have to submit answers for these, but they are useful exercises.</p>
<p><strong>Write down a regression that would allow you to test the hypothesis whether minority male salaries are different (statistically) than minority female salaries. Which coefficient would tell you the answer?</strong></p>
<p>The really hard one:</p>
<p><strong>What hypothesis does a3 test? If we can calculate a minority female salary from a0 + a1 + a2, why do we even need a3?</strong></p>
<p><br></p>
<hr />
<p><br></p>
</div>
</div>
<div id="submission-instructions" class="section level1">
<h1>Submission Instructions</h1>
<p>After you have completed your lab submit via Canvas. Login to the ASU portal at <a href="http://canvas.asu.edu" class="uri">http://canvas.asu.edu</a> and navigate to the assignments tab in the course repository. Upload your file to the appropriate lab submission link. You can use an RMD file or an MS Word file for this assingment.</p>
<p>Remember to name your files according to the convention: <strong>Lab-##-LastName.xxx</strong></p>
<p><br> <br></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
